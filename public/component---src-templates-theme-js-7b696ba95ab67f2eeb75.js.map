{"version":3,"sources":["webpack:///./src/templates/theme.js","webpack:///./node_modules/strict-uri-encode/index.js","webpack:///./node_modules/query-string/index.js","webpack:///./src/assets/images/back.svg","webpack:///./node_modules/gatsby-image/index.js"],"names":["queryString","__webpack_require__","ThemeTitle","styled_components__WEBPACK_IMPORTED_MODULE_10__","b","div","withConfig","displayName","ThemeDescription","ThemeHeader","props","background","ThemeIntro","ThemeMain","ThemesMenu","MenuItem","Object","gatsby__WEBPACK_IMPORTED_MODULE_7__","a","selected","AllThemesLink","Row","Col","CardLink","Card","CardTitle","ChevronButton","ThemePage","render","_this$props","this","data","location","theme","taxonomyTermThemes","themeLinks","allTaxonomyTermThemes","edges","map","edge","lodash_kebabCase__WEBPACK_IMPORTED_MODULE_8___default","node","name","getShortname","parse","search","subtheme","parts","split","encodeURIComponent","length","sorted","relationships","subthemes","sort","nameA","nameB","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","field_theme_image","localFile","publicURL","link","i","key","to","pathname","style","height","opacity","display","marginBottom","marginRight","verticalAlign","src","description","dangerouslySetInnerHTML","__html","processed","result","flex","transform","t","Component","pageQuery","module","exports","str","replace","c","charCodeAt","toString","toUpperCase","strictUriEncode","objectAssign","encode","value","opts","strict","extract","formatter","arrayFormat","accumulator","exec","concat","ret","create","trim","forEach","param","shift","val","join","decodeURIComponent","keys","reduce","Boolean","Array","isArray","keysSorter","input","Number","stringify","obj","index","slice","val2","push","filter","x","238","e","257","__esModule","_classCallCheck3","_interopRequireDefault","_possibleConstructorReturn3","_inherits3","_objectWithoutProperties3","_extends3","_react2","_propTypes2","default","convertProps","convertedProps","responsiveResolution","resolutions","responsiveSizes","sizes","imageCache","inImageCache","io","listeners","isWebpSupportedCache","isWebpSupported","elem","window","document","getContext","toDataURL","indexOf","noscriptImg","srcSet","title","alt","width","transitionDelay","Img","onLoad","otherProps","position","top","left","transition","objectFit","objectPosition","propTypes","object","func","Image","_React$Component","_this","call","isVisible","imgLoaded","IOSupported","IntersectionObserver","state","handleRef","bind","prototype","ref","_this2","el","cb","entries","entry","l","target","isIntersecting","intersectionRatio","unobserve","rootMargin","observe","listenToIntersections","setState","bgColor","_this3","_convertProps","className","outerWrapperClassName","_convertProps$style","_convertProps$imgStyl","imgStyle","_convertProps$placeho","placeholderStyle","backgroundColor","Tag","imagePlaceholderStyle","imageStyle","fadeIn","image","srcWebp","srcSetWebp","overflow","paddingBottom","aspectRatio","base64","tracedSVG","bottom","right","_image","divStyle","defaultProps","bool","string","oneOfType"],"mappings":"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","file":"component---src-templates-theme-js-7b696ba95ab67f2eeb75.js","sourcesContent":["import React from \"react\"\nimport Img from 'gatsby-image'\nimport { Link } from 'gatsby'\nimport kebabCase from 'lodash/kebabCase'\nimport SubthemeSection from '../components/subtheme.js'\nimport styled from 'styled-components'\nimport { graphql } from 'gatsby'\n\nconst queryString = require('query-string');\nconst FlipMove = require('react-flip-move');\n\nconst ThemeTitle = styled.div`\n  margin-top: 15px;\n  margin-bottom:15px;\n  color: inherit;\n  font-family: \"lato\";\n  font-weight: 800;\n  text-rendering: optimizeLegibility;\n  font-size: 54px;\n  line-height: 1\n  letter-spacing: 0.04em;\n  // color:white;\n`\nconst ThemeDescription = styled.div`\n  font-weight: 400;\n  font-size: 18px;\n  line-height: 1.5;\n  letter-spacing: 0.02em;\n  position:relative;\n  max-width: 800px;\n  margin: 0 auto;\n  font-family: 'Lato';\n`\nconst ThemeHeader = styled.div`\n  height: 100vh;\n  // opacity: 0.8;\n  background-image: ${props => props.background ?  `url(${props.background})` : `none`};\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-color: lightgrey;\n  position: fixed;\n  top: 0;\n  left: 00px;\n  right: 0;\n  z-index: -999;\n`\nconst HeaderDimmer = styled.div`\n  width: 100%;\n  position: absolute;\n  left:0;\n  right:0;\n  top:0;\n  z-index: 99999999;\n  height:210px;\n  mix-blend-mode: multiply;\n  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+16,fcfcfc+100&0.93+16,0+100 */\n  background: -moz-linear-gradient(top, rgba(0,0,0,0.93) 16%, rgba(252,252,252,0) 100%); /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(0,0,0,0.93) 16%,rgba(252,252,252,0) 100%); /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(0,0,0,0.93) 16%,rgba(252,252,252,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ed000000', endColorstr='#00fcfcfc',GradientType=0 ); /* IE6-9 */\n`\nconst Dimmer = styled.div`\n  width: 100%;\n  position: absolute;\n  left:0;\n  right:0;\n  bottom:0;\n  height:41vh;\n  mix-blend-mode: multiply;\n  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+61&0+0,0.93+69 */\n  background: -moz-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0.82) 61%, rgba(0,0,0,0.93) 69%); /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0,0.82) 61%,rgba(0,0,0,0.93) 69%); /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0.82) 61%,rgba(0,0,0,0.93) 69%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#ed000000',GradientType=0 ); /* IE6-9 */\n`\n\nconst ThemeIntro = styled.div`\n  background-color: rgba(255,255,255,0.92);\n  padding: 45px 75px;\n  margin-left: 60px;\n  min-height: 100vh;\n  width: 800px;\n`\nconst ThemeMain = styled.div`\n  position: absolute;\n  width:100%;\n`\n\nconst ThemesMenu = styled.div`\n  position: fixed;\n  top: 0px;\n  left: 15px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`\n\nconst MenuItem = styled(Link)`\n  cursor: pointer;\n  textDecoration: none;\n  color:inherit;\n  height: 18px;\n  width: 18px;\n  background-color: ${props => props.selected ? `#4b5256` : `#adc6d2`};\n  border-radius: 50%;\n  display: inline-block;\n  margin-bottom: 15px;\n  margin-left: 2.5px;\n`\n\nconst AllThemesLink = styled(Link)`\n  cursor: pointer;\n  text-decoration: none !important;\n  color:inherit;\n`\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Col = styled.div`\n  display: flex;\n  flex-direction: column;\n`\nconst CardLink = styled(Link)`\n  cursor: pointer;\n  text-decoration: none !important;\n  color:inherit;\n  width: 100%;\n`\n\nconst Card = styled.div`\n  border-radius: 12px;\n  background-color: white;\n  padding: 30px;\n  margin-bottom: 30px;\n`\n\nconst CardTitle = styled.div`\n  font-family: 'Lato';\n  font-size: 24px;\n  margin-bottom: 15px;\n  text-transform: capitalize;\n  line-height: 1.25;\n`\n\nconst ChevronButton = styled.div`\n  height: 100%;\n  margin-left: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`\n\nclass ThemePage extends React.Component {\n  render() {\n    const {data, location} = this.props;\n    const {taxonomyTermThemes, allTaxonomyTermThemes} = data;\n    const theme = taxonomyTermThemes;\n\n    const themeLinks = allTaxonomyTermThemes.edges.map( edge => `/themes/${kebabCase(edge.node.name)}`);\n\n    const queryParams = queryString.parse(this.props.location.search);\n\n    const getShortname = subtheme => {\n      const parts = subtheme.name.split('-');\n      return encodeURIComponent(kebabCase(parts[parts.length - 1]))\n    }\n\n    const getDescription = subtheme => {\n      let result = '<br/>';\n      if(subtheme.description)\n        if(subtheme.description.processed)\n          result = subtheme.description.processed;\n\n      return result;\n    }\n\n    const getLink = subtheme => {\n      let result = `/subthemes/${kebabCase(subtheme.name)}`\n\n      return result;\n    }\n\n    const sorted = theme.relationships.subthemes.sort((a, b) => {\n      var nameA = getShortname(a);\n      var nameB = getShortname(b);\n      if (nameA < nameB) return -1;\n      if (nameA > nameB) return 1;\n      return 0;\n    });\n\n    return (\n      <div>\n       \n        <ThemeHeader background={theme.relationships.field_theme_image && theme.relationships.field_theme_image.localFile.publicURL}>\n           &nbsp;\n        </ThemeHeader>\n        <ThemeMain>\n\n          <ThemesMenu>\n            {\n              themeLinks.map((link, i) => \n                <MenuItem key={`menuitem-${i}`} to={link} selected={link === location.pathname}/>\n              )\n            }\n          </ThemesMenu>\n\n          <ThemeIntro>\n            <AllThemesLink to='/themes'>\n              {/* <Huge>‹</Huge> */}\n              <img style={{height: 24, opacity:0.8, display:'inline-block', marginBottom:0, marginRight:15, verticalAlign:'middle'}} src={require('../assets/images/back.svg')} />\n              <h4 style={{marginBottom:0, display:'inline-block', verticalAlign:'middle'}}>All Themes</h4>\n            </AllThemesLink>\n            <ThemeTitle>{theme.name}</ThemeTitle>\n            {\n              theme.description\n              ?\n              <ThemeDescription\n                dangerouslySetInnerHTML={{ __html: theme.description.processed }}\n              />\n              :\n              null\n            }\n\n            {\n              sorted.map((subtheme, i) => \n                <CardLink key={`subtheme-${i}`} to={getLink(subtheme)}>\n                  <Card>\n                    <Row>\n                      <Col style={{flex:1}}>\n                        <CardTitle>{getShortname(subtheme)}</CardTitle>\n                        <div\n                          dangerouslySetInnerHTML={{ __html: getDescription(subtheme) }}\n                        />\n                      </Col>\n                      <Col>\n                        <ChevronButton><img style={{height: 24, opacity:0.8, display:'inline-block', marginBottom:0, marginRight:15, transform: 'rotate(180deg)', verticalAlign:'middle'}} src={require('../assets/images/back.svg')} /></ChevronButton>\n                      </Col>\n                    </Row>\n                  </Card>\n                </CardLink>\n              )\n            }\n          </ThemeIntro>\n\n          {/*\n            sorted.map(subtheme => (\n                <SubthemeSection\n                  data={subtheme}\n                  key={getShortname(subtheme)}\n                  name={getShortname(subtheme)}\n                  filter={queryParams[getShortname(subtheme)]}\n                  queryParams={queryParams}\n                />\n              ))\n          */}\n        </ThemeMain>\n\n        <br />\n      </div>\n    )\n  }\n}\n\nexport default ThemePage\n\nexport const pageQuery = graphql`\n  query themeQuery($id: String) {\n    allTaxonomyTermThemes {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    taxonomyTermThemes(id: { eq: $id }) {\n      id\n      name\n      description {\n        processed\n      }\n      relationships {\n        field_theme_image {\n          localFile {\n            publicURL\n            childImageSharp {\n              sizes(maxWidth: 960, quality: 90) {\n                ...GatsbyImageSharpSizes\n              }\n            }\n          }\n        }\n\n        subthemes: backref_field_belongs_to_theme {\n          name\n          id\n          description {\n            processed\n          }\n          relationships {\n            articles: backref_field_belongs_to_subtheme_node_article {\n              ...ArticleFragment\n            }\n            clips: backref_field_belongs_to_subtheme_node_clip {\n              ...PosterImageClipFragment\n            }\n            interviews: backref_field_which_subtheme_does_this_b_node_interview {\n              ...InterviewFragment\n            }\n            faqs: backref_field_belongs_to_subtheme_node_faq {\n              ...FAQFragment\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\tformatter(decodeURIComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA2LjUgMTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDYuNSAxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiMzQjNCM0I7fQo8L3N0eWxlPgo8dGl0bGU+ZG93bjwvdGl0bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02LjMsMC45YzAuMi0wLjIsMC4zLTAuNSwwLjEtMC43bDAsMEM2LjIsMCw1LjgtMC4xLDUuNywwLjFsMCwwTDAuMSw1LjZDMCw1LjgsMCw2LjEsMC4xLDYuM2wwLDBsMCwwbDUuNSw1LjUKCWMwLjIsMC4yLDAuNSwwLjIsMC43LDBsMCwwYzAuMi0wLjIsMC4yLTAuNSwwLTAuN2wwLDBsLTUuMi01TDYuMywwLjl6Ii8+Cjwvc3ZnPgo=\"","\"use strict\";\n\nexports.__esModule = true;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Handle legacy names for image queries.\nvar convertProps = function convertProps(props) {\n  var convertedProps = (0, _extends3.default)({}, props);\n  if (convertedProps.responsiveResolution) {\n    convertedProps.resolutions = convertedProps.responsiveResolution;\n    delete convertedProps.responsiveResolution;\n  }\n  if (convertedProps.responsiveSizes) {\n    convertedProps.sizes = convertedProps.responsiveSizes;\n    delete convertedProps.responsiveSizes;\n  }\n\n  return convertedProps;\n};\n\n// Cache if we've seen an image before so we don't both with\n// lazy-loading & fading in on subsequent mounts.\nvar imageCache = {};\nvar inImageCache = function inImageCache(props) {\n  var convertedProps = convertProps(props);\n  // Find src\n  var src = convertedProps.sizes ? convertedProps.sizes.src : convertedProps.resolutions.src;\n\n  if (imageCache[src]) {\n    return true;\n  } else {\n    imageCache[src] = true;\n    return false;\n  }\n};\n\nvar io = void 0;\nvar listeners = [];\n\nfunction getIO() {\n  if (typeof io === \"undefined\" && typeof window !== \"undefined\" && window.IntersectionObserver) {\n    io = new window.IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        listeners.forEach(function (l) {\n          if (l[0] === entry.target) {\n            // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0\n            if (entry.isIntersecting || entry.intersectionRatio > 0) {\n              io.unobserve(l[0]);\n              l[1]();\n            }\n          }\n        });\n      });\n    }, { rootMargin: \"200px\" });\n  }\n\n  return io;\n}\n\nvar listenToIntersections = function listenToIntersections(el, cb) {\n  getIO().observe(el);\n  listeners.push([el, cb]);\n};\n\nvar isWebpSupportedCache = null;\nvar isWebpSupported = function isWebpSupported() {\n  if (isWebpSupportedCache !== null) {\n    return isWebpSupportedCache;\n  }\n\n  var elem = typeof window !== \"undefined\" ? window.document.createElement(\"canvas\") : {};\n  if (elem.getContext && elem.getContext(\"2d\")) {\n    isWebpSupportedCache = elem.toDataURL(\"image/webp\").indexOf(\"data:image/webp\") === 0;\n  } else {\n    isWebpSupportedCache = false;\n  }\n\n  return isWebpSupportedCache;\n};\n\nvar noscriptImg = function noscriptImg(props) {\n  // Check if prop exists before adding each attribute to the string output below to prevent\n  // HTML validation issues caused by empty values like width=\"\" and height=\"\"\n  var src = props.src ? \"src=\\\"\" + props.src + \"\\\" \" : \"src=\\\"\\\" \"; // required attribute\n  var srcSet = props.srcSet ? \"srcset=\\\"\" + props.srcSet + \"\\\" \" : \"\";\n  var sizes = props.sizes ? \"sizes=\\\"\" + props.sizes + \"\\\" \" : \"\";\n  var title = props.title ? \"title=\\\"\" + props.title + \"\\\" \" : \"\";\n  var alt = props.alt ? \"alt=\\\"\" + props.alt + \"\\\" \" : \"alt=\\\"\\\" \"; // required attribute\n  var width = props.width ? \"width=\\\"\" + props.width + \"\\\" \" : \"\";\n  var height = props.height ? \"height=\\\"\" + props.height + \"\\\" \" : \"\";\n  var opacity = props.opacity ? props.opacity : \"1\";\n  var transitionDelay = props.transitionDelay ? props.transitionDelay : \"0.5s\";\n\n  return \"<img \" + width + height + src + srcSet + alt + title + sizes + \"style=\\\"position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:\" + transitionDelay + \";opacity:\" + opacity + \";width:100%;height:100%;object-fit:cover;object-position:center\\\"/>\";\n};\n\nvar Img = function Img(props) {\n  var style = props.style,\n      onLoad = props.onLoad,\n      otherProps = (0, _objectWithoutProperties3.default)(props, [\"style\", \"onLoad\"]);\n\n  return _react2.default.createElement(\"img\", (0, _extends3.default)({}, otherProps, {\n    onLoad: onLoad,\n    style: (0, _extends3.default)({\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      transition: \"opacity 0.5s\",\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\",\n      objectPosition: \"center\"\n    }, style)\n  }));\n};\n\nImg.propTypes = {\n  style: _propTypes2.default.object,\n  onLoad: _propTypes2.default.func\n};\n\nvar Image = function (_React$Component) {\n  (0, _inherits3.default)(Image, _React$Component);\n\n  function Image(props) {\n    (0, _classCallCheck3.default)(this, Image);\n\n    // If this browser doesn't support the IntersectionObserver API\n    // we default to start downloading the image right away.\n    var _this = (0, _possibleConstructorReturn3.default)(this, _React$Component.call(this, props));\n\n    var isVisible = true;\n    var imgLoaded = true;\n    var IOSupported = false;\n\n    // If this image has already been loaded before then we can assume it's\n    // already in the browser cache so it's cheap to just show directly.\n    var seenBefore = inImageCache(props);\n\n    if (!seenBefore && typeof window !== \"undefined\" && window.IntersectionObserver) {\n      isVisible = false;\n      imgLoaded = false;\n      IOSupported = true;\n    }\n\n    // Always don't render image while server rendering\n    if (typeof window === \"undefined\") {\n      isVisible = false;\n      imgLoaded = false;\n    }\n\n    _this.state = {\n      isVisible: isVisible,\n      imgLoaded: imgLoaded,\n      IOSupported: IOSupported\n    };\n\n    _this.handleRef = _this.handleRef.bind(_this);\n    return _this;\n  }\n\n  Image.prototype.handleRef = function handleRef(ref) {\n    var _this2 = this;\n\n    if (this.state.IOSupported && ref) {\n      listenToIntersections(ref, function () {\n        _this2.setState({ isVisible: true, imgLoaded: false });\n      });\n    }\n  };\n\n  Image.prototype.render = function render() {\n    var _this3 = this;\n\n    var _convertProps = convertProps(this.props),\n        title = _convertProps.title,\n        alt = _convertProps.alt,\n        className = _convertProps.className,\n        outerWrapperClassName = _convertProps.outerWrapperClassName,\n        _convertProps$style = _convertProps.style,\n        style = _convertProps$style === undefined ? {} : _convertProps$style,\n        _convertProps$imgStyl = _convertProps.imgStyle,\n        imgStyle = _convertProps$imgStyl === undefined ? {} : _convertProps$imgStyl,\n        _convertProps$placeho = _convertProps.placeholderStyle,\n        placeholderStyle = _convertProps$placeho === undefined ? {} : _convertProps$placeho,\n        sizes = _convertProps.sizes,\n        resolutions = _convertProps.resolutions,\n        backgroundColor = _convertProps.backgroundColor,\n        Tag = _convertProps.Tag;\n\n    var bgColor = void 0;\n    if (typeof backgroundColor === \"boolean\") {\n      bgColor = \"lightgray\";\n    } else {\n      bgColor = backgroundColor;\n    }\n\n    var imagePlaceholderStyle = (0, _extends3.default)({\n      opacity: this.state.imgLoaded ? 0 : 1,\n      transitionDelay: \"0.25s\"\n    }, imgStyle, placeholderStyle);\n\n    var imageStyle = (0, _extends3.default)({\n      opacity: this.state.imgLoaded || this.props.fadeIn === false ? 1 : 0\n    }, imgStyle);\n\n    if (sizes) {\n      var image = sizes;\n\n      // Use webp by default if browser supports it\n      if (image.srcWebp && image.srcSetWebp && isWebpSupported()) {\n        image.src = image.srcWebp;\n        image.srcSet = image.srcSetWebp;\n      }\n\n      // The outer div is necessary to reset the z-index to 0.\n      return _react2.default.createElement(\n        Tag,\n        {\n          className: (outerWrapperClassName ? outerWrapperClassName : \"\") + \" gatsby-image-outer-wrapper\",\n          style: {\n            // Let users set component to be absolutely positioned.\n            position: style.position === \"absolute\" ? \"initial\" : \"relative\"\n          }\n        },\n        _react2.default.createElement(\n          Tag,\n          {\n            className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n            style: (0, _extends3.default)({\n              position: \"relative\",\n              overflow: \"hidden\"\n            }, style),\n            ref: this.handleRef\n          },\n          _react2.default.createElement(Tag, {\n            style: {\n              width: \"100%\",\n              paddingBottom: 100 / image.aspectRatio + \"%\"\n            }\n          }),\n          image.base64 && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            src: image.base64,\n            style: imagePlaceholderStyle\n          }),\n          image.tracedSVG && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            src: image.tracedSVG,\n            style: imagePlaceholderStyle\n          }),\n          bgColor && _react2.default.createElement(Tag, {\n            title: title,\n            style: {\n              backgroundColor: bgColor,\n              position: \"absolute\",\n              top: 0,\n              bottom: 0,\n              opacity: !this.state.imgLoaded ? 1 : 0,\n              transitionDelay: \"0.35s\",\n              right: 0,\n              left: 0\n            }\n          }),\n          this.state.isVisible && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            srcSet: image.srcSet,\n            src: image.src,\n            sizes: image.sizes,\n            style: imageStyle,\n            onLoad: function onLoad() {\n              _this3.state.IOSupported && _this3.setState({ imgLoaded: true });\n              _this3.props.onLoad && _this3.props.onLoad();\n            }\n          }),\n          _react2.default.createElement(\"noscript\", {\n            dangerouslySetInnerHTML: {\n              __html: noscriptImg((0, _extends3.default)({ alt: alt, title: title }, image))\n            }\n          })\n        )\n      );\n    }\n\n    if (resolutions) {\n      var _image = resolutions;\n      var divStyle = (0, _extends3.default)({\n        position: \"relative\",\n        overflow: \"hidden\",\n        display: \"inline-block\",\n        width: _image.width,\n        height: _image.height\n      }, style);\n\n      if (style.display === \"inherit\") {\n        delete divStyle.display;\n      }\n\n      // Use webp by default if browser supports it\n      if (_image.srcWebp && _image.srcSetWebp && isWebpSupported()) {\n        _image.src = _image.srcWebp;\n        _image.srcSet = _image.srcSetWebp;\n      }\n\n      // The outer div is necessary to reset the z-index to 0.\n      return _react2.default.createElement(\n        Tag,\n        {\n          className: (outerWrapperClassName ? outerWrapperClassName : \"\") + \" gatsby-image-outer-wrapper\",\n          style: {\n            // Let users set component to be absolutely positioned.\n            position: style.position === \"absolute\" ? \"initial\" : \"relative\"\n          }\n        },\n        _react2.default.createElement(\n          Tag,\n          {\n            className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n            style: divStyle,\n            ref: this.handleRef\n          },\n          _image.base64 && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            src: _image.base64,\n            style: imagePlaceholderStyle\n          }),\n          _image.tracedSVG && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            src: _image.tracedSVG,\n            style: imagePlaceholderStyle\n          }),\n          bgColor && _react2.default.createElement(Tag, {\n            title: title,\n            style: {\n              backgroundColor: bgColor,\n              width: _image.width,\n              opacity: !this.state.imgLoaded ? 1 : 0,\n              transitionDelay: \"0.25s\",\n              height: _image.height\n            }\n          }),\n          this.state.isVisible && _react2.default.createElement(Img, {\n            alt: alt,\n            title: title,\n            width: _image.width,\n            height: _image.height,\n            srcSet: _image.srcSet,\n            src: _image.src,\n            style: imageStyle,\n            onLoad: function onLoad() {\n              _this3.setState({ imgLoaded: true });\n              _this3.props.onLoad && _this3.props.onLoad();\n            }\n          }),\n          _react2.default.createElement(\"noscript\", {\n            dangerouslySetInnerHTML: {\n              __html: noscriptImg((0, _extends3.default)({\n                alt: alt,\n                title: title,\n                width: _image.width,\n                height: _image.height\n              }, _image))\n            }\n          })\n        )\n      );\n    }\n\n    return null;\n  };\n\n  return Image;\n}(_react2.default.Component);\n\nImage.defaultProps = {\n  fadeIn: true,\n  alt: \"\",\n  Tag: \"div\"\n};\n\nImage.propTypes = {\n  responsiveResolution: _propTypes2.default.object,\n  responsiveSizes: _propTypes2.default.object,\n  resolutions: _propTypes2.default.object,\n  sizes: _propTypes2.default.object,\n  fadeIn: _propTypes2.default.bool,\n  title: _propTypes2.default.string,\n  alt: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]), // Support Glamor's css prop.\n  outerWrapperClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  style: _propTypes2.default.object,\n  imgStyle: _propTypes2.default.object,\n  placeholderStyle: _propTypes2.default.object,\n  position: _propTypes2.default.string,\n  backgroundColor: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.bool]),\n  onLoad: _propTypes2.default.func,\n  Tag: _propTypes2.default.string\n};\n\nexports.default = Image;"],"sourceRoot":""}